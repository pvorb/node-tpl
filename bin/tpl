#!/usr/bin/env node

var optimist = require('optimist')
  .usage('  tpl [options] [file]  Apply a template to a file\n'
      +  '  tpl [-h|--help]       Show help');
var argv = optimist.argv;

// Show help
if (argv.h) {
  console.log(optimist.help());
}
// Show help
else if (argv._.length == 0) {
  console.log(optimist.help());
}
// One file at a time
else if (argv._.length > 1) {
  console.error('tpl can only translate one file at a time.');
}
// Translate file
else {
  var file = require('path').resolve(process.cwd(), argv._[0]);

  delete argv._;
  delete argv['$0'];

  require('../tpl.js').apply(file, argv, function(err, result) {
    console.log(result);
  });
}
